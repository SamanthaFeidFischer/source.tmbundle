<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
	<key>beforeRunningCommand</key>
	<string>nop</string>
	<key>command</key>
	<string># Using source-highlight convert source code to html
# the source-highlight command supports the following languages:
# java (for Java)
# javascript (for Javascript)
# cpp (for C/C++)
# prolog (for Prolog)
# perl (for Perl)
# php3 (for Php3)
# python (for Python)
# flex (for flex)
# changelog (for ChangeLog)
# ruby (for Ruby)
# lua (for Lua)
# caml (for Caml)
# sml (for Sml)
# log (for log files, e.g., system logs, apache and IpTables)

lang=$(perl &lt;&lt;&lt;$TM_SCOPE -pe 's/.*?\b(?:source|text)\.([^. ]*).*/$1/')

case "$lang" in
    c|c++|objc|objc++)
        lang="cpp"
        ;;
    php)
        lang="php3"
        ;;
    ocaml)
        lang="caml"
        ;;
esac
expand -t $TM_TAB_SIZE | "${TM_SRC_HIGHLIGHT:=source-highlight}" --line-number --src-lang=$lang --out-format=xhtml</string>
	<key>input</key>
	<string>document</string>
	<key>keyEquivalent</key>
	<string>^H</string>
	<key>name</key>
	<string>Convert Source to HTML</string>
	<key>output</key>
	<string>openAsNewDocument</string>
	<key>scope</key>
	<string>source, text.latex</string>
	<key>uuid</key>
	<string>3DBAEC85-7D09-11D9-A1F6-000D93B6E43C</string>
</dict>
</plist>
